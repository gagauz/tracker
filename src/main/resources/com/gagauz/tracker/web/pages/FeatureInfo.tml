<html t:type="layout" title="ticket header info"
      t:sidebarTitle="Framework Version"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

	<t:pagelink t:page="projectinfo" t:context="feature.project">${feature.project.name}</t:pagelink>

	<fieldset>
		<legend>${feature.name}</legend>
		<t:if test="editMode">
			<t:BeanEditForm t:id="editForm" object="feature" exclude="id, created, updated" />
			<p:else>
				<t:eventlink class="edit button" t:event="edit">Edit</t:eventlink>
		    	<div>
				    <p>${feature.description}</p>
				    <p>Creator: ${feature.creator.name}</p>
				    <p>Created: ${date:feature.created}</p>
				</div>
				</p:else>
		</t:if>
    </fieldset>
    <div class="feature-info">
    <t:loop source="featureVersions" value="featureVersion">
    	<fieldset> 
    		<legend>
    			<t:if test="featureVersion.version">
    				<t:pagelink t:page="versioninfo" t:context="featureVersion.version">${message:version}: ${featureVersion.version.name}</t:pagelink>
    					${message:release-date}: ${date:featureVersion.version.releaseDate,d.MM.yyyy}
    				<p:else>
    					${message:future-versions}
    				</p:else>
    			</t:if>
    		</legend>
    		
	    	<div class="desc-div">${featureVersion.description}</div>
	    	
		    <t:loop source="getMap().get(featureVersion.getVersion())" value="ticket">
		    	<div class="ticket-div">
		    		<t:pagelink t:page="TicketInfo" t:context="ticket" class="${ticket.type}">${ticket.type} #${ticket.id} ${ticket.summary}</t:pagelink>
		    		<div>
		    			${ticket.description}
		    		</div>
		    	</div>
		    </t:loop>
	    </fieldset>
	    
    </t:loop>
	</div>    

</html>
