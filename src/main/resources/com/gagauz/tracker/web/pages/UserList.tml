<html t:type="layout" title="tracker Index"
      t:sidebarTitle="Framework Version"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd"
      xmlns:p="tapestry:parameter">

    <p>${message:greeting}</p>

	
	<div class="title">Create/edit user</div>
	<div class="block">
		<t:if test="editUser">
			<t:beaneditform t:id="form" object="editUser" exclude="id,submit" add="roles,submit">
				<p:roles>
					<t:label for="roles"></t:label>
					<t:tap.MultiSelect t:id="roles" model="allRoleGroups" value="editUser.roleGroups" size="4" blankLabel="message:select"/>
				</p:roles>
				<p:submit>
					<t:linksubmit class="save button">${message:save}</t:linksubmit>
				</p:submit>
			</t:beaneditform>
			<t:eventlink class="reset button" event="reset">${message:reset}</t:eventlink>
			<br/>
		<p:else>
			<t:eventlink class="add button" event="create">${message:create-user}</t:eventlink>
		</p:else>
		</t:if>
	</div>

	<div class="title">User list</div>
	<div class="block">
	    <t:grid source="users" row="user" add="edit">
	    	<p:editCell>
	    	<t:eventlink event="edit" context="user.id">${message:edit}</t:eventlink>
	    	</p:editCell>
	    </t:grid>
	</div>
	
    <p:sidebar>
        <t:UserMenu/>
    </p:sidebar>

</html>

